
# risk-engine-x

**risk-engine-x** æ˜¯ä¸€ä¸ªåŸºäº Java çš„å®æ—¶é£æ§å¼•æ“ï¼Œæ—¨åœ¨æä¾›é«˜æ•ˆã€å¯æ‰©å±•çš„é£æ§è§£å†³æ–¹æ¡ˆã€‚  
è¯¥é¡¹ç›®ç»“åˆäº†ä½œè€…åœ¨ä¿¡è´·é£æ§å’Œå¸åœˆäº¤æ˜“æ‰€é£æ§é¢†åŸŸçš„å¤šå¹´ç»éªŒï¼Œèåˆäº†é“¾ä¸Šæ•°æ®åˆ†æã€å®æ—¶ç›‘æ§ã€æ™ºèƒ½å‘Šè­¦ã€é‡åŒ–äº¤æ˜“ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºåæ¬ºè¯ˆã€ä¿¡ç”¨è¯„ä¼°ã€é£é™©å†³ç­–ç­‰å¤šç§åœºæ™¯ã€‚

---

## ğŸ“Œ é¡¹ç›®èƒŒæ™¯

éšç€åŒºå—é“¾æŠ€æœ¯çš„å‘å±•å’Œæ•°å­—èµ„äº§çš„æ™®åŠï¼Œäº¤æ˜“æ‰€ä½œä¸ºå¸åœˆçš„é‡è¦è½½ä½“ï¼Œæ‰¿è½½ç€ä¼—å¤šç”¨æˆ·çš„äº¤æ˜“éœ€æ±‚ã€‚  
ä¸ºäº†æœ‰æ•ˆç›‘æ§é“¾ä¸Šæ•°æ®ã€è¯†åˆ«æ½œåœ¨é£é™©ã€ä¿éšœäº¤æ˜“å®‰å…¨ï¼Œå¼€å‘ä¸€ä¸ªé«˜æ•ˆçš„é£æ§å¼•æ“æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚  
æœ¬é¡¹ç›®æ—¨åœ¨é€šè¿‡åˆ†æé“¾ä¸Šæ•°æ®ï¼ˆå¦‚ç­¹ç åˆ†å¸ƒã€æ´»è·ƒåœ°å€ã€èªæ˜é’±åœ°å€çš„ç›ˆåˆ©èƒ½åŠ›ç­‰ï¼‰ï¼Œ äº¤æ˜“æ‰€Kçº¿æ•°æ®åˆ†æï¼ˆå¯¹äº¤æ˜“æŒ‡æ ‡RSIã€KDJã€MACDã€BOLLã€MAã€EMAé‡åŒ–åˆ†æï¼‰ï¼Œå¸åœˆæ–°é—»å®æ—¶æŠ“å–å’Œæ¨é€ç­‰äº‹ä»¶ï¼Œå®ç°å¯¹å¸‚åœºè¡Œæƒ…çš„å®æ—¶ç›‘æ§å’Œé£é™©é¢„è­¦ï¼Œåç»­è¿˜å¯ä»¥æ‹“å±•ä¼˜åŒ–å‡çº§è¿­ä»£ã€‚

---

## ğŸ§© åŠŸèƒ½æ¨¡å—

æœ¬é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å­æ¨¡å—ï¼š

- `risk-engine-crawler`ï¼šçˆ¬è™«æ¨¡å—ï¼Œç”¨äºæŠ“å–é“¾ä¸Šä¿¡æ¯ã€‚
- `risk-engine-components`: ä¸­é—´ä»¶æ¨¡å—ï¼Œç”¨äºesã€mqã€‚
- `risk-control-analysis`ï¼šåˆ†ææ¨¡å—ï¼Œè´Ÿè´£æ¸…æ´—å’Œåˆ†æçˆ¬è™«æ•°æ®ã€‚
- `risk-engine-common`ï¼šå…¬å…±æ¨¡å—ï¼ŒåŒ…å«é¡¹ç›®é€šç”¨çš„å·¥å…·ç±»å’Œé…ç½®ã€‚
- `risk-engine-service`ï¼šä¸šåŠ¡æ¨¡å—ï¼Œå¤„ç†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚
- `risk-engine-db`ï¼šæ•°æ®è®¿é—®æ¨¡å—ï¼Œè´Ÿè´£æ•°æ®åº“çš„æŒä¹…åŒ–æ“ä½œã€‚
- `risk-engine-metric`ï¼šç‰¹å¾æœåŠ¡æ¨¡å—ï¼Œç”¨äºè®¡ç®—å„ç±»ç‰¹å¾å€¼ã€‚
- `risk-engine-rest`ï¼šRESTFUL æ¥å£æœåŠ¡ï¼Œæä¾›å¯¹å¤–çš„ API æœåŠ¡ã€‚
- `risk-engine-job`ï¼šä»»åŠ¡è°ƒåº¦æœåŠ¡ï¼Œå¤„ç†æ¶ˆæ¯æ¶ˆè´¹å’Œå®šæ—¶ä»»åŠ¡ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### âœ… ç¯å¢ƒè¦æ±‚

- Java 11 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- Docker dockeréƒ¨ç½²xxl-job-adminã€ xxl-job-executorã€redis6.0ã€mysql8.0ã€jdk11ã€kibana-7.17.4ã€elasticsearch-7.17.4ã€apache/rocketmq:4.9.4
- Ubuntu22.04-Docker26
- CPU - 2æ ¸ å†…å­˜ - 4GB
  ç³»ç»Ÿç›˜ - SSDäº‘ç¡¬ç›˜ 60GB
  æµé‡åŒ… - 1536GB/æœˆï¼ˆå³°å€¼å¸¦å®½ 30Mbpsï¼‰

### ğŸ”§ å…‹éš†é¡¹ç›®

bash
```
git clone https://github.com/ixiaoku/risk-engine-x.git
cd risk-engine-x
```

ğŸ”¨ æ„å»ºé¡¹ç›®

`mvn clean install -DskipTests`

â–¶ï¸ è¿è¡ŒæœåŠ¡

ç›®å‰æ˜¯é€šè¿‡é…ç½®æ¨é€åˆ°githubçš„actionæ‰“åŒ…ç¼–è¯‘ç”Ÿæˆdockeré•œåƒï¼Œæ¨é€åˆ°docket hub
ç„¶ååœ¨æœåŠ¡å™¨æ‹‰å–æœ€æ–°é•œåƒï¼Œå¯åŠ¨æœåŠ¡

## æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
```
#!/bin/bash

cd /opt/risk-engine-x

echo "Disk usage before deployment:"
df -h

echo "Stopping services..."
docker-compose down

echo "Removing old images..."
docker rmi bbxydcr22/risk-engine-x:risk-engine-admin-ui-latest || true
docker rmi bbxydcr22/risk-engine-x:risk-engine-rest-latest || true
docker rmi bbxydcr22/risk-engine-x:risk-engine-job-latest || true

echo "Pulling latest images..."
docker pull bbxydcr22/risk-engine-x:risk-engine-admin-ui-latest
docker pull bbxydcr22/risk-engine-x:risk-engine-rest-latest
docker pull bbxydcr22/risk-engine-x:risk-engine-job-latest

echo "Redeploying services..."
docker-compose up -d

echo "Disk usage after deployment:"
df -h

echo "Deployment completed!"
```
æ‚¨å¯ä»¥æ ¹æ®éœ€è¦å¯åŠ¨å…¶ä»–æ¨¡å—ï¼Œå¦‚ risk-engine-jobç­‰ã€‚

â¸»

### sqlè„šæœ¬ç›®å½•
- ./risk-engine-db/src/main/resources/db.sql

ğŸ§± æ¶æ„å›¾

![æ¶æ„å›¾](./doc/img.png)

â¸»

ğŸ“ ä½¿ç”¨ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ RESTFUL æ¥å£è¿›è¡Œé£é™©è¯„ä¼°çš„ç¤ºä¾‹ï¼š
```
curl -X POST http://localhost:8088/api/risk/engine \
-H "Content-Type: application/json" \
-d '{
"flowNo": "BTCUSDT1744306200000",
"incidentCode": "TradeQuantData",
"requestPayload": "{\"announcement\":{\"content\":\"5minå†…ï¼Œå¸ç§äº¤æ˜“å¯¹ï¼šBTCUSDT, å¼€ç›˜ä»·: 79182.00000000, æ”¶ç›˜ä»·ï¼š79238.20000000, æ¶¨è·Œå¹…ï¼š0.07\",\"createdAt\":\"2025-04-11 01:44:59\",\"title\":\"æ¶¨è·Œå¹…æé†’\"},\"close\":79238.20000000,\"closeTime\":1744307099999,\"downChangePercent\":0,\"high\":79441.39000000,\"interval\":\"15m\",\"low\":79055.25000000,\"open\":79182.00000000,\"openTime\":1744306200000,\"quoteVolume\":22141752.22314620,\"symbol\":\"BTCUSDT\",\"takerBuyQuoteVolume\":10012098.84158940,\"takerBuyVolume\":126.31532000,\"tradeCount\":56258,\"upChangePercent\":0.07,\"volume\":279.40449000}"
}'

```
å“åº”ç¤ºä¾‹ï¼š
```
{
    "decisionResult": "1"//1é€šè¿‡ 0æ‹’ç»
}
```


â¸»

ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿å¯¹æœ¬é¡¹ç›®æ„Ÿå…´è¶£çš„å¼€å‘è€…æå‡ºå»ºè®®ã€æŠ¥å‘Šé—®é¢˜æˆ–æäº¤ä»£ç ã€‚è¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤å‚ä¸è´¡çŒ®ï¼š
-	Fork æœ¬ä»“åº“
-	åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ï¼šgit checkout -b feature/YourFeature
-	æäº¤æ‚¨çš„æ›´æ”¹ï¼šgit commit -m 'Add YourFeature'
-	æ¨é€åˆ°åˆ†æ”¯ï¼šgit push origin feature/YourFeature
-	åˆ›å»ºä¸€ä¸ªæ–°çš„ Pull Request

åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒï¼Œå¹¶é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ã€‚

â¸»

ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯ã€‚
æ‚¨å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬é¡¹ç›®çš„ä»£ç ï¼Œä½†è¯·ä¿ç•™åŸå§‹è®¸å¯è¯å£°æ˜ã€‚

â¸»

ğŸ“¬ è”ç³»æ–¹å¼

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸æˆ‘è”ç³»ï¼š 
- GitHub Issues: https://github.com/ixiaoku/risk-engine-x/issues
- é‚®ä»¶: djm88dcr@gmail.com

---